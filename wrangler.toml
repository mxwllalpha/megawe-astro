name = "megawe-astro"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Pages configuration
pages_build_output_dir = "dist"

# Environment variables for production
[env.production.vars]
NODE_ENV = "production"
SITE_URL = "https://megawe.net"
API_URL = "https://api.megawe.net"

# Environment variables for preview
[env.preview.vars]
NODE_ENV = "preview"
SITE_URL = "https://megawe-astro.pages.dev"
API_URL = "https://api.megawe.net"

# KV bindings for production environment
[[env.production.kv_namespaces]]
binding = "SESSION"
id = "0a77c7bec89b44e3a02a779ab516f24c"
preview_id = "0a77c7bec89b44e3a02a779ab516f24c"

[[env.production.kv_namespaces]]
binding = "CACHE"
id = "0a77c7bec89b44e3a02a779ab516f24c"
preview_id = "0a77c7bec89b44e3a02a779ab516f24c"

# KV bindings for preview environment
[[env.preview.kv_namespaces]]
binding = "SESSION"
id = "0a77c7bec89b44e3a02a779ab516f24c"
preview_id = "0a77c7bec89b44e3a02a779ab516f24c"

[[env.preview.kv_namespaces]]
binding = "CACHE"
id = "0a77c7bec89b44e3a02a779ab516f24c"
preview_id = "0a77c7bec89b44e3a02a779ab516f24c"

# KV bindings (if needed for sessions)
# [[kv_namespaces]]
# binding = "SESSION"
# id = "your-kv-namespace-id"

# Analytics Engine (optional)
# [[analytics_engine_datasets]]
# binding = "ANALYTICS"

# D1 Database (optional)
# [[d1_databases]]
# binding = "DB"
# database_name = "megawe-db"
# database_id = "your-database-id"

# R2 Bucket (optional)
# [[r2_buckets]]
# binding = "ASSETS"
# bucket_name = "megawe-assets"