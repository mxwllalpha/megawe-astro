name = "megawe-astro"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Pages configuration
pages_build_output_dir = "dist"

# Environment variables
[env.production.vars]
NODE_ENV = "production"
SITE_URL = "https://megawe.net"
API_URL = "https://api.megawe.net"
# KV namespace IDs - Configure these in Cloudflare Pages environment settings
SESSION_KV_ID = ""
CACHE_KV_ID = ""
SESSION_KV_PREVIEW_ID = ""
CACHE_KV_PREVIEW_ID = ""

[env.preview.vars]
NODE_ENV = "preview"
SITE_URL = "https://megawe-astro.pages.dev"
API_URL = "https://api.megawe.net"
# Preview environment KV IDs - Configure in Cloudflare Pages
SESSION_KV_ID = ""
CACHE_KV_ID = ""
SESSION_KV_PREVIEW_ID = ""
CACHE_KV_PREVIEW_ID = ""

[env.development.vars]
NODE_ENV = "development"
SITE_URL = "http://localhost:4321"
API_URL = "https://api.megawe.net"
# Development environment KV IDs - Configure in local .env
SESSION_KV_ID = ""
CACHE_KV_ID = ""
SESSION_KV_PREVIEW_ID = ""
CACHE_KV_PREVIEW_ID = ""

# KV bindings for session management and caching
# These bindings are configured in Cloudflare Pages dashboard
[[kv_namespaces]]
binding = "SESSION"
# Configure ID in Cloudflare Pages environment settings
id = "placeholder-session-kv-id"
preview_id = "placeholder-session-kv-id"

[[kv_namespaces]]
binding = "CACHE"
# Configure ID in Cloudflare Pages environment settings
id = "placeholder-cache-kv-id"
preview_id = "placeholder-cache-kv-id"

# KV bindings (if needed for sessions)
# [[kv_namespaces]]
# binding = "SESSION"
# id = "your-kv-namespace-id"

# Analytics Engine (optional)
# [[analytics_engine_datasets]]
# binding = "ANALYTICS"

# D1 Database (optional)
# [[d1_databases]]
# binding = "DB"
# database_name = "megawe-db"
# database_id = "your-database-id"

# R2 Bucket (optional)
# [[r2_buckets]]
# binding = "ASSETS"
# bucket_name = "megawe-assets"